!function () { var e = document.querySelector(".prod-id").value, t = document.querySelectorAll(".lista_cor_variacao li"), o = document.querySelector(".start-promotion"), n = document.querySelector(".end-promotion"), r = new Intl.NumberFormat("pt-BR", { style: "currency", currency: "BRL" }); const c = { method: "GET", contentType: "application/json; charset=utf-8" }; function a(e) { fetch("/web_api/variants/" + e, c).then(function (e) { e.json().then(function (e) { var t = e.Variant.VariantImage, r = []; "0000-00-00" != e.Variant.start_promotion && "0000-00-00" != e.Variant.end_promotion ? (document.querySelector(".contador-promotion").style.display = "block", o.dataset.start = e.Variant.start_promotion, n.dataset.end = e.Variant.end_promotion) : (o.dataset.start = e.Variant.start_promotion, n.dataset.end = e.Variant.end_promotion, document.querySelector(".contador-promotion").style.display = "none"), i(e.Variant.start_promotion, e.Variant.end_promotion), s(e.Variant.price, e.Variant.promotional_price, e.Variant.payment_option), console.log(e), document.querySelector(".content-image__full").setAttribute("src", e.Variant.VariantImage[0].https), t.forEach(e => { r.push(`<img class="thumb change-photo"  onClick="changeMainPhoto('${e.https}')" data-original="${e.https}" src="${e.thumbs[180].https}">`) }), document.querySelector(".thumb-carrossel .glider-track").innerHTML = r.join(" "), new Glider(document.querySelector(".thumb-carrossel")).refresh() }) }), setTimeout(function () { document.querySelectorAll(".cor_variacao.passo2 .lista_cor_variacao li").forEach(e => { e.addEventListener("click", function () { a(this.dataset.id) }) }), document.querySelector(".cor_variacao.passo2 select#second_dropdown") && document.querySelector(".cor_variacao.passo2 select#second_dropdown").addEventListener("change", function () { a(this.value) }) }, 1e3) } function i(e, t) { (new Date).getTime() > new Date(t.replace("-", "/")).getTime() ? document.querySelector(".contador-promotion").style.display = "none" : (new Date).getTime() < new Date(e.replace("-", "/")).getTime() ? (document.querySelector(".contador-promotion").style.display = "none", document.querySelector(".price-content .price").classList.remove("preco-cut"), document.querySelector(".price-content .price-promotion").style.display = "none") : "0000-00-00" == o.dataset.start && "0000-00-00" == n.dataset.end ? (document.querySelector(".price-content .price").classList.remove("preco-cut"), document.querySelector(".price-content .price-promotion").style.display = "none") : (regressivePromotion(), document.querySelector(".price-content .price").classList.add("preco-cut"), document.querySelector(".price-content .price-promotion").style.display = "block") } function s(e, t, o) { var n, c = document.querySelector(".price"), a = document.querySelector(".price-content .price-promotion"), i = document.querySelector(".parcelamento"); e && (c.innerHTML = r.format(e), c.setAttribute("data-priceFull", e), "0" == t || "0.00" == t ? (c.classList.remove("preco-cut"), a.style.display = "none") : (a.innerHTML = r.format(t), n = 100 - 100 * t / e, document.querySelector(".promotion-off-content span").innerHTML = n.toFixed(0) + "% de desconto")), o && (i.innerHTML = o) } fetch("/web_api/products/" + e, c).then(function (e) { e.json().then(function (e) { s(e.Product.price, e.Product.promotional_price, e.Product.payment_option), document.querySelector(".start-promotion") && document.querySelector(".end-promotion") && i(document.querySelector(".start-promotion").dataset.start, document.querySelector(".end-promotion").dataset.end), console.log(e) }) }), t.forEach(e => { e.addEventListener("click", function () { a(this.dataset.id) }) }), document.querySelector("select#variation_first_select") && document.querySelector("select#variation_first_select").addEventListener("change", function () { a(this.value) }), document.querySelector(".btn-buy").addEventListener("click", function () { setTimeout(function () { document.querySelector(".botao-continuar-comprando").addEventListener("click", function () { window.location.href = "/" }) }, 2e3) }) }();