!(function () {
    var e = document.querySelector(".prod-id").value,
        t = document.querySelectorAll(".lista_cor_variacao li"),
        o = (document.querySelector(".start-promotion"), document.querySelector(".end-promotion"), new Intl.NumberFormat("pt-BR", { style: "currency", currency: "BRL" }));
    const n = { method: "GET", contentType: "application/json; charset=utf-8" };
    function c(e) {
        fetch("/web_api/variants/" + e, n).then(function (e) {
            e.json().then(function (e) {
                var t = e.Variant.VariantImage,
                    o = [];
                r(e.Variant.price, e.Variant.promotional_price, e.Variant.payment_option),
                    console.log(e),
                    document.querySelector(".content-image__full").setAttribute("src", e.Variant.VariantImage[0].https),
                    t.forEach((e) => {
                        o.push(`<div class="thumb-content" onClick="changeMainPhoto('${e.https}')" data-original="${e.https}"><img class="thumb change-photo" src="${e.thumbs[180].https}"></div>`);
                    }),
                    
                    $('.thumb-carrossel-init').slick('unslick');

                    document.querySelector(".thumb-carrossel-init").innerHTML = o.join(" ");

                    $(".thumb-carrossel-init").slick({
                        infinite: !0,
                        slidesToShow: 4,
                        slidesToScroll: 1,
                        autoplay: !0,
                        duration: 3,
                        prevArrow: '<button class="slider-prev" style="z-index: 1;"><i class="fas fa-angle-left"></i></button>',
                        nextArrow: '<button class="slider-next"><i class="fas fa-angle-right"></i></button>',
                        responsive: [
                            { breakpoint: 1400, settings: { slidesToShow: 3, slidesToScroll: 1, duration: 1 } },
                            { breakpoint: 768, settings: { slidesToShow: 2, slidesToScroll: 1, duration: 1 } },
                        ],
                    })
            });
        }),
            setTimeout(function () {
                document.querySelectorAll(".cor_variacao.passo2 .lista_cor_variacao li").forEach((e) => {
                    e.addEventListener("click", function () {
                        c(this.dataset.id);
                    });
                }),
                    document.querySelector(".cor_variacao.passo2 select#second_dropdown") &&
                        document.querySelector(".cor_variacao.passo2 select#second_dropdown").addEventListener("change", function () {
                            c(this.value);
                        });
            }, 1e3);
    }
    function r(e, t, n) {
        var c = document.querySelector(".price"),
            r = document.querySelector(".price-promotion"),
            a = document.querySelector(".parcelamento");
        e && ((c.innerHTML = o.format(e)), console.log(t), "0" == t || "0.00" == t ? (c.classList.add("price-promotion"), (r.style.display = "none")) : ((r.innerHTML = o.format(t)), c.classList.add("preco-cut"))), n && (a.innerHTML = n);
    }
    fetch("/web_api/products/" + e, n).then(function (e) {
        e.json().then(function (e) {
            r(e.Product.price, e.Product.promotional_price, e.Product.payment_option);
        });
    }),
        t.forEach((e) => {
            e.addEventListener("click", function () {
                c(this.dataset.id);
            });
        }),
        document.querySelector("select#variation_first_select") &&
            document.querySelector("select#variation_first_select").addEventListener("change", function () {
                c(this.value);
            }),
        document.querySelector(".btn-buy").addEventListener("click", function () {
            setTimeout(function () {
                document.querySelector(".botao-continuar-comprando").addEventListener("click", function () {
                    window.location.href = "/";
                });
            }, 2e3);
        });
})();
