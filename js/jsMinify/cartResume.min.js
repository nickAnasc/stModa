function deleteProduct(t, e, a, r, c) { var n = new Intl.NumberFormat("pt-BR", { style: "currency", currency: "BRL" }), o = document.querySelector("html").dataset.session; fetch(0 != e ? "/web_api/carts/" + o + "/" + t + "/" + e : "/web_api/carts/" + o + "/" + t, { method: "DELETE", contentType: "application/json; charset=utf-8" }).then(function (t) { var e = document.querySelector(".total-content .total"), o = e.dataset.fullTotal = e.dataset.fullTotal - a, s = document.querySelector('.cart-amount span[data-cart="amount"]'); e.innerHTML = n.format(o), s.innerHTML = s.textContent - r, c.closest(".cart-item").style.opacity = "0", setTimeout(function () { c.closest(".cart-item").remove() }, 300), 0 == s.textContent && (document.querySelector(".cart-content").innerHTML = '<p class="empty-cart">Carrinho Vazio.</p>') }) } setTimeout(function () { var t = new Intl.NumberFormat("pt-BR", { style: "currency", currency: "BRL" }), e = "/web_api/cart/" + document.querySelector("html").dataset.session, a = [], r = document.querySelector(".cart-content"), c = document.querySelector(".total-content .total"), n = 0; fetch(e).then(function (e) { e.ok && e.json().then(function (e) { e.forEach(e => { n += e.Cart.price * e.Cart.quantity; var r = ['<article class="cart-item" data-valueTotal="' + e.Cart.price * e.Cart.quantity + '"><i class="fas fa-trash-alt delete-prod" onclick="deleteProduct(' + e.Cart.product_id + "," + e.Cart.variant_id + "," + e.Cart.price * e.Cart.quantity + "," + e.Cart.quantity + ',this)"></i><img class="img-cart-resume" src="' + e.Cart.product_image.https + '"><div class="width-space"><p class="nome-product"><a href="' + e.Cart.product_url.https + '">' + e.Cart.product_name + '</a></p><div class="cart-item__flex"><span class="price-cart-resume">' + t.format(e.Cart.price) + '</span><span class="qtde-cart-resume">Quantidade <strong class="qtde">' + e.Cart.quantity + "</strong></span></div></div></article>"]; a.push(r) }), r.innerHTML = a.join(""), c.innerHTML = t.format(n), c.dataset.fullTotal = n }) }) }, 1e3);